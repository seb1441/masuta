<nav class="bg-<%= primary_color %>" data-controller="toggle">
  <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
    <div class="relative flex items-center justify-between h-16">
      <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
        <!-- Mobile menu button-->
        <button data-action="click->toggle#toggle touch->toggle#toggle" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white transition duration-150 ease-in-out" aria-label="Main menu" aria-expanded="false">
          <!-- Icon when menu is closed. -->
          <!-- Menu open: "hidden", Menu closed: "block" -->
          <svg data-target="toggle.toggleable" class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <!-- Icon when menu is open. -->
          <!-- Menu open: "block", Menu closed: "hidden" -->
          <svg data-target="toggle.toggleable" class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
        <div class="flex-shrink-0">
          <%= link_to "Masuta", pages_home_path, class: "lg:block h-16 w-auto font-semibold text-5xl tracking-tight got-font tracking-wide text-white select-none" %>
        </div>
        <div class="flex hidden sm:block sm:ml-6 sm:mt-4">
          <div class="flex">
            <% if @admin_area %>
              <%= link_to "Lessons", lessons_path, class: "mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2 #{'bg-gray-800' if request.path == lessons_path}" %>
              <%= link_to "Students", users_path, class: "block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 #{'bg-gray-800' if request.path == users_path }" %>
              <%= link_to 'Students Side', pages_home_path, class: "block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 #{'bg-gray-800' if request.path == pages_home_path}" %>
            <% else %>
              <%= link_to "Home", pages_home_path, class: "block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 #{'bg-gray-800' if request.path == pages_home_path}" %>
              <%= link_to "Buy Lessons", stripe_product_path(StripeProduct.first), class: "mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2 #{'bg-gray-800' if request.path == stripe_product_path(StripeProduct.first)}" %>
              <%= link_to "Contact", new_contact_message_path, class: "mt-1 block px-2 py-1 text-white font-semibold rounded hover:bg-gray-800 sm:mt-0 sm:ml-2 #{'bg-gray-800' if request.path == new_contact_message_path }" unless current_user %>
              <%= link_to("Admin", lessons_path, class: "mt-1 block px-2 py-1 text-gray-800 font-semibold rounded hover:bg-gray-200 sm:mt-0 sm:ml-2") if current_user&.role? :admin %>
            <% end %>
          </div>
        </div>
      </div>
      <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
        <% if current_user %>
          <button class="p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-white focus:outline-none focus:text-white focus:bg-gray-700 transition duration-150 ease-in-out" aria-label="Notifications">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
          </button>
        <% end %>

        <!-- Profile dropdown -->
        <div class="ml-3 relative" data-controller="toggle">
          <div>
            <% if current_user %>
              <button data-action="click->toggle#toggle touch->toggle#toggle" class="relative z-10 block h-8 w-8 rounded-full overflow-hidden border-2 border-gray-600 focus:outline-none focus:border-white" id="user-menu" aria-label="User menu" aria-haspopup="true">
                <svg enable-background="new 0 0 478.024 478.024" version="1.1" viewBox="0 0 478.02 478.02" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m411.7 73.561c-45.117-47.093-107.54-73.67-172.76-73.55-131.8-0.166-238.78 106.54-238.94 238.34-0.082 65.17 26.492 127.54 73.55 172.62 0.137 0.136 0.188 0.341 0.324 0.461 1.382 1.331 2.884 2.458 4.284 3.738 3.84 3.413 7.68 6.946 11.725 10.24 2.167 1.707 4.42 3.413 6.639 4.983 3.823 2.85 7.646 5.7 11.639 8.329 2.714 1.707 5.513 3.413 8.294 5.12 3.686 2.219 7.356 4.454 11.162 6.485 3.226 1.707 6.519 3.174 9.796 4.727 3.584 1.707 7.117 3.413 10.786 4.949s7.356 2.731 11.076 4.062 6.929 2.56 10.496 3.652c4.028 1.212 8.158 2.15 12.254 3.157 3.413 0.836 6.724 1.792 10.24 2.475 4.71 0.939 9.489 1.536 14.268 2.185 2.953 0.41 5.837 0.99 8.823 1.28 7.817 0.768 15.701 1.195 23.654 1.195s15.838-0.427 23.654-1.195c2.987-0.29 5.871-0.87 8.823-1.28 4.779-0.649 9.557-1.246 14.268-2.185 3.413-0.683 6.827-1.707 10.24-2.475 4.096-1.007 8.226-1.946 12.254-3.157 3.567-1.092 7.014-2.423 10.496-3.652s7.441-2.56 11.076-4.062 7.202-3.26 10.786-4.949c3.277-1.553 6.571-3.021 9.796-4.727 3.806-2.031 7.475-4.267 11.162-6.485 2.782-1.707 5.581-3.26 8.294-5.12 3.994-2.628 7.817-5.478 11.639-8.329 2.219-1.707 4.471-3.243 6.639-4.983 4.045-3.243 7.885-6.69 11.725-10.24 1.399-1.28 2.901-2.406 4.284-3.738 0.136-0.119 0.188-0.324 0.324-0.461 95.174-91.178 98.411-242.24 7.233-337.42zm-38.359 319.55c-3.106 2.731-6.315 5.325-9.557 7.834-1.911 1.468-3.823 2.918-5.786 4.318-3.089 2.236-6.229 4.352-9.421 6.383-2.321 1.485-4.693 2.918-7.083 4.318-3.004 1.707-6.059 3.413-9.148 5.12-2.731 1.399-5.513 2.714-8.311 4.011s-5.888 2.679-8.909 3.891-6.229 2.355-9.387 3.413c-2.884 0.99-5.768 2.014-8.687 2.884-3.413 1.024-6.98 1.86-10.513 2.714-2.765 0.648-5.495 1.382-8.294 1.929-4.045 0.785-8.175 1.331-12.322 1.894-2.355 0.307-4.693 0.734-7.066 0.973-6.554 0.631-13.193 1.007-19.9 1.007s-13.346-0.375-19.9-1.007c-2.372-0.239-4.71-0.666-7.066-0.973-4.147-0.563-8.277-1.109-12.322-1.894-2.799-0.546-5.53-1.28-8.294-1.929-3.533-0.853-7.049-1.707-10.513-2.714-2.918-0.87-5.803-1.894-8.687-2.884-3.157-1.092-6.315-2.202-9.387-3.413-3.072-1.212-5.973-2.543-8.909-3.891s-5.581-2.611-8.311-4.011c-3.089-1.604-6.144-3.294-9.148-5.12-2.389-1.399-4.762-2.833-7.083-4.318-3.191-2.031-6.332-4.147-9.421-6.383-1.963-1.399-3.874-2.85-5.786-4.318-3.243-2.509-6.451-5.12-9.557-7.834-0.751-0.563-1.434-1.28-2.167-1.929 0.763-58.057 38.06-109.32 93.065-127.92 27.503 13.083 59.435 13.083 86.938 0 55.004 18.594 92.301 69.857 93.065 127.92-0.717 0.649-1.4 1.298-2.133 1.929zm-193.91-256.26c18.479-32.864 60.1-44.525 92.964-26.046s44.525 60.1 26.046 92.964c-6.131 10.904-15.141 19.914-26.046 26.046-0.085 0-0.188 0-0.29 0.102-4.526 2.519-9.309 4.545-14.268 6.042-0.887 0.256-1.707 0.597-2.645 0.819-1.707 0.444-3.499 0.751-5.257 1.058-3.31 0.579-6.659 0.915-10.018 1.007h-1.946c-3.359-0.092-6.708-0.428-10.018-1.007-1.707-0.307-3.516-0.614-5.256-1.058-0.905-0.222-1.707-0.563-2.645-0.819-4.959-1.497-9.742-3.522-14.268-6.042l-0.307-0.102c-32.864-18.479-44.525-60.1-26.046-92.964zm226.32 220.49c-10.952-51.083-44.59-94.39-91.375-117.64 38.245-41.661 35.475-106.44-6.186-144.68s-106.44-35.475-144.68 6.186c-35.954 39.166-35.954 99.332 0 138.5-46.785 23.251-80.423 66.557-91.375 117.64-65.444-92.183-43.768-219.96 48.415-285.41s219.96-43.768 285.41 48.415c24.601 34.653 37.807 76.104 37.786 118.6 0 42.461-13.284 83.858-37.991 118.39z"/></svg>
              </button>
              <button data-action="click->toggle#toggle touch->toggle#toggle" data-target="toggle.toggleable" tabindex="-1" class="fixed inset-0 h-full w-full cursor-default hidden"></button>
            <% else %>
              <%= link_to "Sign in", new_user_session_path, class: "mt-1 block px-2 py-1 text-gray-800 font-semibold rounded hover:bg-gray-200 sm:mt-0 sm:ml-2" %>
            <% end %>
          </div>
          <!--
            Profile dropdown panel, show/hide based on dropdown state.

            Entering: "transition ease-out duration-100"
              From: "transform opacity-0 scale-95"
              To: "transform opacity-100 scale-100"
            Leaving: "transition ease-in duration-75"
              From: "transform opacity-100 scale-100"
              To: "transform opacity-0 scale-95"
          -->
          <div class="hidden origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg" data-target="toggle.toggleable">
            <div class="py-1 rounded-md bg-white shadow-xs" role="menu" aria-orientation="vertical" aria-labelledby="user-menu">
              <%= link_to "Account settings", edit_user_registration_path, class: "block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out" %>
              <a href="#" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out">Support</a>
              <%= link_to "Sign out", destroy_user_session_path, method: :delete, class: "block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out" %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--
    Mobile menu, toggle classes based on menu state.

    Menu open: "block", Menu closed: "hidden"
  -->
  <div data-target="toggle.toggleable" class="hidden sm:hidden">
    <div class="px-2 pt-2 pb-3">
      <a href="#" class="block px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700 transition duration-150 ease-in-out">Dashboard</a>
      <a href="#" class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700 transition duration-150 ease-in-out">Team</a>
      <a href="#" class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700 transition duration-150 ease-in-out">Projects</a>
      <a href="#" class="mt-1 block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700 transition duration-150 ease-in-out">Calendar</a>
    </div>
  </div>
</nav>